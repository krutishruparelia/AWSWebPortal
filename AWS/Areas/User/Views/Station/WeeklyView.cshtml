@using System.Data
@using AWS.Models
@{
    DataTable weeklygetCoulmns = new DataTable();
    weeklygetCoulmns = ViewBag.gpColname;
    int position = 1;
    <div class="row">
        <div class="col-lg-12">
            <div class="card">
                <div class="card-body">
                    <ul class="nav nav-tabs nav-tabs-primary">
                        @for (int i = 0; i < weeklygetCoulmns.Rows.Count - 1; i++)
                        {
                            var name = weeklygetCoulmns.Rows[i][0].ToString().Replace(" ", "");

                            var sname = weeklygetCoulmns.Rows[i][0].ToString();
                            AWSDatabaseContext db = new AWSDatabaseContext();
                            var getSensorIDsql = db.tbl_SensorMaster.Where(x => x.Name == sname).FirstOrDefault();
                            int sensorID = getSensorIDsql.ID;
                            var getUnitsql = db.tbl_ParameterMaster.Where(j => j.SensorID == sensorID).FirstOrDefault();
                            if (i == 0)
                            {
                                if (getUnitsql != null)
                                {
                                    <li class="nav-item">
                                        <a class="nav-link active" data-toggle="tab" href="#Weekly_@name"><i class="icon-home"></i> <span class="hidden-xs">@weeklygetCoulmns.Rows[i][0].ToString() (@getUnitsql.Unit)</span></a>
                                    </li>
                                }
                                else
                                {
                                    <li class="nav-item">
                                        <a class="nav-link active" data-toggle="tab" href="#Weekly_@name"><i class="icon-home"></i> <span class="hidden-xs">@weeklygetCoulmns.Rows[i][0].ToString()</span></a>
                                    </li>
                                }
                            }
                            else
                            {
                                if (getUnitsql != null)
                                {
                                    <li class="nav-item" id="krutish">
                                        <a class="nav-link" data-toggle="tab" href="#Weekly_@name" id="krutish"><i class="icon-home" id="krutish"></i> <span class="hidden-xs" id="krutish">@weeklygetCoulmns.Rows[i][0].ToString() (@getUnitsql.Unit)</span></a>
                                    </li>
                                  

                                }
                                else
                                {
                                    <li class="nav-item">
                                        <a class="nav-link" data-toggle="tab" href="#Weekly_@name"><i class="icon-home"></i> <span class="hidden-xs">@weeklygetCoulmns.Rows[i][0].ToString()</span></a>
                                    </li>
                                }
                            }

                        }

                    </ul>
                    
                    <!-- Tab panes -->
                    <div class="tab-content">
                        @for (int i = 0; i < weeklygetCoulmns.Rows.Count - 1; i++)
                        {
                            var sname = weeklygetCoulmns.Rows[i][0].ToString();
                            AWSDatabaseContext db = new AWSDatabaseContext();
                            var getSensorIDsql = db.tbl_SensorMaster.Where(x => x.Name == sname).FirstOrDefault();
                            int sensorID = getSensorIDsql.ID;
                            var getUnitsql = db.tbl_ParameterMaster.Where(j => j.SensorID == sensorID).FirstOrDefault();
                            var tabname = weeklygetCoulmns.Rows[i][0].ToString().Replace(" ", "");
                            if (i == 0)
                            {

                                if (getUnitsql != null)
                                {
                                    <div id="Weekly_@tabname" class="container tab-pane active">
                                        @Html.Action("WeeklyGraph", new { data = weeklygetCoulmns.Rows[i][0].ToString(), Position = position, Unit = getUnitsql.Unit })
                                    </div>
                                }
                                else
                                {
                                    <div id="Weekly_@tabname" class="container tab-pane active">
                                        @Html.Action("WeeklyGraph", new { data = weeklygetCoulmns.Rows[i][0].ToString(), Position = position })
                                    </div>
                                }
                            }
                            else
                            {
                                if (getUnitsql != null)
                                {
                                    <div id="Weekly_@tabname" class="container tab-pane">
                                        @Html.Action("WeeklyGraph", new { data = weeklygetCoulmns.Rows[i][0].ToString(), Position = position, Unit = getUnitsql.Unit, id = "test" })
                                    </div>
                                }
                                else
                                {
                                    <div id="Weekly_@tabname" class="container tab-pane">
                                        @Html.Action("WeeklyGraph", new { data = weeklygetCoulmns.Rows[i][0].ToString(), Position = position, Unit = "" })
                                    </div>
                                }
                            }
                            position++;
                            position++;
                            position++;
                            <script>
                                function alert() {
                                    alert('ss');
                                }
                            </script>
                        }

                    </div>
                </div>
            </div>
        </div>
    </div>
}
